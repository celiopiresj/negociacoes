{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obterNegociacoesDaSemana","cb","get","then","dados","map","objeto","Date","data","quantidade","valor","err","Error","obterNegociacoesDaSemanaAnterior","obterNegociacoesDaSemanaRetrasada","obterNegociacoesDoPeriodo","Promise","all","periodo","reduce","novoArray","item","concat","sort","a","b","getTime","catch","console","log"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;AAEF,kBAAMC,iBAAN,CAAwB;AAC3BC,8BAAc;AACV,yBAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACH;;AAEDK,yCAAyBC,EAAzB,EAA6B;;AAEzB,2BAAO,KAAKF,KAAL,CACNG,GADM,CACF,oBADE,EAENC,IAFM,CAGHC,SAASA,MAAMC,GAAN,CAAUC,UACX,IAAIV,UAAJ,CAAe,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADC,CAHN,EAMHC,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,uCAAV,CAAN;AACH,qBARE,CAAP;AAUH;;AAEDC,iDAAiCZ,EAAjC,EAAqC;;AAEjC,2BAAO,KAAKF,KAAL,CACNG,GADM,CACF,sBADE,EAENC,IAFM,CAGHC,SACIA,MAAMC,GAAN,CAAUC,UACN,IAAIV,UAAJ,CAAe,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADJ,CAJD,EAOHC,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AACH,qBATE,CAAP;AAWH;;AAEDE,kDAAkCb,EAAlC,EAAsC;;AAElC,2BAAO,KAAKF,KAAL,CACNG,GADM,CACF,uBADE,EAENC,IAFM,CAGHC,SAASA,MAAMC,GAAN,CAAUC,UACX,IAAIV,UAAJ,CAAe,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADC,CAHN,EAKHC,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,2DAAV,CAAN;AACH,qBAPE,CAAP;AASH;;AAEDG,4CAA4B;AACxB,2BAAQC,QAAQC,GAAR,CAAY,CAChB,KAAKjB,wBAAL,EADgB,EAEhB,KAAKa,gCAAL,EAFgB,EAGhB,KAAKC,iCAAL,EAHgB,CAAZ,EAKPX,IALO,CAKFe,WAAWA,QACZC,MADY,CACL,CAACC,SAAD,EAAYC,IAAZ,KAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CADhB,EACuC,EADvC,EAEZE,IAFY,CAEP,CAACC,CAAD,EAAIC,CAAJ,KAAUA,EAAEjB,IAAF,CAAOkB,OAAP,KAAmBF,EAAEhB,IAAF,CAAOkB,OAAP,EAFtB,CALT,EASPC,KATO,CASDhB,OAAO;AACViB,gCAAQC,GAAR,CAAYlB,GAAZ;AACA,8BAAM,IAAIC,KAAJ,CAAU,kDAAV,CAAN;AACH,qBAZO,CAAR;AAaH;AA7D0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js'\r\nimport { Negociacao } from './Negociacao.js'\r\n\r\nexport class NegociacaoService {\r\n    constructor() {\r\n        this._http = new HttpService();\r\n    }\r\n\r\n    obterNegociacoesDaSemana(cb) {\r\n        \r\n        return this._http\r\n        .get('negociacoes/semana')\r\n        .then(\r\n            dados => dados.map(objeto => \r\n                    new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\r\n            ,\r\n            err => {\r\n                throw new Error('Não foi possível obter as negociações')\r\n            });\r\n    \r\n    }\r\n\r\n    obterNegociacoesDaSemanaAnterior(cb) {\r\n        \r\n        return this._http\r\n        .get('negociacoes/anterior')\r\n        .then(\r\n            dados =>  \r\n                dados.map(objeto => \r\n                    new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\r\n            ,\r\n            err => {\r\n                throw new Error('Não foi possível obter as negociações da semana anterior')\r\n            });\r\n    \r\n    }\r\n\r\n    obterNegociacoesDaSemanaRetrasada(cb) {\r\n        \r\n        return this._http\r\n        .get('negociacoes/retrasada')\r\n        .then(\r\n            dados => dados.map(objeto => \r\n                    new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor)),\r\n            err => {\r\n                throw new Error('Não foi possível obter as negociações da semana retrasada')\r\n            });\r\n    \r\n    }\r\n\r\n    obterNegociacoesDoPeriodo() {\r\n        return  Promise.all([\r\n            this.obterNegociacoesDaSemana(),\r\n            this.obterNegociacoesDaSemanaAnterior(),\r\n            this.obterNegociacoesDaSemanaRetrasada(),\r\n        ])\r\n        .then(periodo => periodo\r\n            .reduce((novoArray, item) => novoArray.concat(item),[])\r\n            .sort((a, b) => b.data.getTime() - a.data.getTime())\r\n        )\r\n        .catch(err => {\r\n            console.log(err)\r\n            throw new Error('Não foi possível obter as negociações do periodo')\r\n        });\r\n    }\r\n}"]}